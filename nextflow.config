manifest {
  description = 'LRGASP Challenage 3 Benchmark Workflow'
  author = 'Tianyuan Liu <https://orcid.org/0000-0002-8561-6239>'
  nextflowVersion = '>=19.10.0'
  workDir = "$baseDir/"
}

profiles {
    docker {
        process {
            withName:validation {
                container = "validation:0.2.0"
            }
        }

        process {
            withName:compute_metrics {
                container = "metrics:0.2.0"
            }
        }

        process {
            withName:consolidation {
                container = "consolidation:0.2.0"
            }
        }
        docker.enabled = true
        // set time zone for running docker containers
        docker.runOptions = '--user \$(id -u):\$(id -g) -e TZ="\$([ -z \\"\$TZ\\"] && cat /etc/timezone || echo \\"\$TZ\\")"'
    }
}


// default parameter values
params  {
  // submitted file
  input = "$baseDir/lrgasp-challenge-3_full_data/input_data/rna.fasta"

  // output directory
  validation_result = "$baseDir/test_result/validation_result/validation.json"

  // public reference dir
  public_ref_dir = "$baseDir/lrgasp-challenge-3_full_data/public_ref"

  // community_id
  community_id = 'OEBC010'

  // challenges_ids
  challenges_ids = '"mouse_num_iso mouse_sirvs mouse_full_Illumina_support_vs_coding_transcripts mouse_non-canonical_SJ_vs_SJ_SR_coverage mouse_%_mapping_to_genome mouse_%_multi-exonic_isoforms mouse_%_full_illumina_support mouse_num_busco_gene_compl-dupl mouse_num_busco_gene_compl-single mouse_num_busco_gene_fragment mouse_num_busco_gene_missing"'

  // participant_id
  participant_id = 'fake_pipeline_test'

  // result
  data_model_export_dir = "$baseDir/test_result/consolidation_result/result.json"

  assess_dir = "$baseDir/lrgasp-challenge-3_full_data/benchmark_data"

  assessment_results = "$baseDir/test_result/"

  outdir = "$baseDir/test_result/consolidation_result"

  metrics_data = "$baseDir/test_result/metrics_result"

  statsdir = "sample_out/stats"

}

// By default output execution reports
timeline {
    enabled = true
    file = "${params.statsdir}/timeline.html"
  }
  report {
    enabled = true
    file = "${params.statsdir}/report.html"
  }
  trace {
    enabled = true
    file = "${params.statsdir}/trace.txt"
  }
  dag {
    enabled = true
    file = "${params.statsdir}/DAG.dot"
  }